let pokemonRepository = (function () {
  let e = [];
  function t(t) {
    e.push(t);
  }
  function o() {
    return e;
  }
  function n(e) {
    return fetch(e.detailsUrl)
      .then((e) => e.json())
      .then((t) => {
        (e.imageUrl = t.sprites.front_default),
          (e.height = t.height),
          (e.types = t.types.map((e) => e.type.name).join(", "));
      })
      .catch((e) => console.error(e));
  }
  return {
    add: t,
    getAll: o,
    loadList: function e() {
      return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150")
        .then((e) => e.json())
        .then((e) => {
          e.results.forEach((e) => {
            t({ name: e.name, detailsUrl: e.url });
          });
        })
        .catch((e) => console.error(e));
    },
    addListItem: function e(t) {
      let o = document.querySelector(".pokemon-list"),
        i = document.createElement("li");
      i.classList.add("list-group-item");
      let r = document.createElement("button");
      (r.innerText = t.name),
        r.classList.add("btn", "btn-primary", "pokemon-button"),
        r.setAttribute("data-toggle", "modal"),
        r.setAttribute("data-target", "#pokemon-modal"),
        i.appendChild(r),
        o.appendChild(i),
        r.addEventListener("click", function () {
          n(t).then(function () {
            var e, o, n, i;
            let r, a, l;
            (e = t),
              (o = e.name),
              (n = `Height: ${e.height}m, Types: ${e.types}`),
              (i = e.imageUrl),
              (r = document.querySelector(".modal-title")),
              (a = document.querySelector(".modal-details")),
              (l = document.querySelector(".modal-image")),
              (r.innerText = o),
              (a.innerText = n),
              (l.src = i),
              $("#pokemon-modal").modal("show");
          });
        });
    },
    loadDetails: n,
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (e) {
    pokemonRepository.addListItem(e);
  });
});
